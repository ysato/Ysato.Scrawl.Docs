#### ユースケース名: 自身のスレッドを編集する

* **アクター:** 登録ユーザー (ログインユーザー)
* **目的:** 自身のスレッドのタイトルを更新する。
* **関連するHTMLモック画面:** 自身のスレッド詳細画面 (詳細画面内で直接編集可能)

---

**1. 事前条件:**

* ユーザーはWebアプリケーションにログインしている。
* ユーザーは自身のスレッド詳細画面を閲覧している。
* 閲覧しているスレッドは、現在ログインしているユーザーが作成したものである。
* スレッド詳細画面には、スレッドのタイトルが表示されており、そのタイトルを編集状態に切り替えるためのUI（例: 編集アイコン、またはタイトルをクリックすると編集モードになるなど）が存在する。

**2. 基本的な流れ（正常系）:**

1.  **ユーザーは自身のスレッド詳細画面を開く。**
2.  **ユーザーはスレッドのタイトル部分にある編集用のUI（アイコンクリック、またはタイトル領域のクリックなど）を操作し、編集モードに切り替える。**
    * システムはタイトル表示をテキスト入力フィールドに切り替え、現在のタイトルが入力済み状態で表示される。
    * 編集モードを終了するためのUI（例: 保存ボタン、キャンセルボタン、またはEnterキーによる保存など）が表示される。
3.  **ユーザーはタイトル入力フィールドでタイトルを修正する。**
4.  **ユーザーは「保存」ボタンをクリックするか、所定の操作（例: Enterキー押下、フォーカスアウトなど）を行う。**
5.  **システムは入力された新しいタイトルを検証する。**
    * タイトルが空でないか、特定の文字数制限などをチェックする。
6.  **検証が成功した場合、システムはデータベースの該当スレッドのタイトルを更新する。**
    * スレッドの更新日時も同時に更新される。
7.  **システムはスレッド詳細画面のタイトル表示を更新されたものに切り替え、編集モードを終了する。**
    * この際、保存成功を通知するメッセージ（例: 「タイトルが更新されました」）を表示する。

---

**3. 代替の流れ（例外系、エラーなど）:**

* **A. タイトルが未入力の場合:**
    1.  ユーザーが保存操作を行う。
    2.  システムはタイトルの入力欄が空であることを検知する。
    3.  システムはタイトル入力欄の近くにエラーメッセージ（例: 「タイトルは必須です」）を表示し、保存処理を中断する。タイトルは編集前の状態に戻るか、編集モードが維持される。
* **B. タイトルが長すぎる場合:**
    1.  ユーザーが保存操作を行う。
    2.  システムは入力されたタイトルが規定の文字数を超えていることを検知する。
    3.  システムはタイトル入力欄の近くにエラーメッセージ（例: 「タイトルは〇〇文字以内で入力してください」）を表示し、保存処理を中断する。タイトルは編集前の状態に戻るか、編集モードが維持される。
* **C. 保存せずに編集モードをキャンセルした場合:**
    1.  ユーザーが編集モードに切り替えた後、変更内容を破棄する操作（例: 「キャンセル」ボタンをクリック、Escキー押下など）を行う。
    2.  システムは変更内容を破棄し、タイトル表示を編集前の状態に戻し、編集モードを終了する。
* **D. システムエラーが発生した場合:**
    1.  ユーザーが保存操作を行う。
    2.  データベース更新中に予期せぬエラーが発生する。
    3.  システムは一般的なエラーメッセージ（例: 「タイトル更新中にエラーが発生しました。時間をおいて再度お試しください。」）を表示し、タイトルは編集前の状態に戻るか、編集モードが維持される。

---

**4. 事後条件:**

* スレッドのタイトルが正常に更新された場合: データベースの該当スレッドのタイトルが変更され、ユーザーはスレッド詳細画面で新しいタイトルを確認できる。
* スレッドのタイトルが更新されなかった場合: ユーザーはスレッド詳細画面に留まり、エラーメッセージが表示されるか、編集モードが維持される。

