#### ユースケース名: 自身のスレッドのスクラッチを削除する

* **アクター:** 登録ユーザー (ログインユーザー)
* **目的:** 自身のスレッドに投稿した不要なスクラッチを消去する。
* **関連するHTMLモック画面:** 自身のスレッド詳細画面 (スクラッチの横に削除ボタンがあるイメージ)

---

**1. 事前条件:**

* ユーザーはWebアプリケーションにログインしている。
* ユーザーは自身のスレッド詳細画面を閲覧している。
* 閲覧しているスレッドに、ログインユーザー自身が投稿したスクラッチが存在する。
* 各スクラッチには、削除をトリガーするためのUI（例: ゴミ箱アイコン、または「削除」ボタンなど）が存在する。

**2. 基本的な流れ（正常系）:**

1.  **ユーザーは自身のスレッド詳細画面を開く。**
2.  **ユーザーは削除したい自身のスクラッチを見つけ、そのスクラッチの横にある削除用のUIを操作する。**
    * システムは、削除確認のダイアログまたはモーダルを表示する（例: 「このスクラッチを削除してもよろしいですか？」）。
3.  **ユーザーは削除確認のダイアログで「削除」ボタンをクリックする。**
4.  **システムはスクラッチの削除処理を実行する。**
    * この際、操作ユーザーとスクラッチ作成ユーザーが一致するかをバックエンドで検証する。
5.  **検証が成功した場合、システムはデータベースから該当スクラッチを削除する。**
6.  **システムはスクラッチ一覧の表示から削除されたスクラッチを除外し、画面を更新する。**
    * 画面がリロードされるか、Ajaxなどで動的に更新される。
7.  **システムは削除成功を通知するメッセージ（任意。例: 「スクラッチが削除されました」）を表示する。**

---

**3. 代替の流れ（例外系、エラーなど）:**

* **A. 削除確認をキャンセルした場合:**
    1.  ユーザーが削除確認のダイアログで「キャンセル」ボタンをクリックする。
    2.  システムは削除処理を中止し、スクラッチ一覧の表示は変化しない。
* **B. 自身のスクラッチ以外を削除しようとした場合:**
    1.  ユーザーが他のユーザーのスクラッチの削除UIを操作する。（UI上で制限されているが、バックエンドでの検証を想定）
    2.  システムは操作ユーザーとスクラッチ作成ユーザーが一致しないことを検知する。
    3.  システムはエラーメッセージ（例: 「他のユーザーのスクラッチは削除できません」）を表示し、処理を中断する。スクラッチは削除されない。
* **C. 存在しないスクラッチを削除しようとした場合:**
    1.  ユーザーが何らかの理由で（例えば、古いキャッシュや不正なリクエストで）既に削除されたスクラッチを削除しようとする。
    2.  システムは該当スクラッチが見つからないことを検知する。
    3.  システムはエラーメッセージ（例: 「指定されたスクラッチは見つかりません」）を表示し、処理を中断する。
* **D. システムエラーが発生した場合:**
    1.  ユーザーが削除操作を行う。
    2.  データベース削除中に予期せぬエラーが発生する。
    3.  システムは一般的なエラーメッセージ（例: 「スクラッチの削除中にエラーが発生しました。時間をおいて再度お試しください。」）を表示し、スクラッチは削除されない。

---

**4. 事後条件:**

* スクラッチが正常に削除された場合: データベースから該当スクラッチレコードが削除され、ユーザーはスレッド詳細画面でスクラッチが削除されたことを確認できる。
* スクラッチが削除されなかった場合: ユーザーはスレッド詳細画面に留まり、エラーメッセージが表示される。

