#### ユースケース名: 自身のスレッドにスクラッチを追加する

* **アクター:** 登録ユーザー (ログインユーザー)
* **目的:** 自身のスレッドに対して、新たな情報や補足、進捗状況などをスクラッチとして追加する。
* **関連するHTMLモック画面:** 自身のスレッド詳細画面

---

**1. 事前条件:**

* ユーザーはWebアプリケーションにログインしている。
* ユーザーは自身のスレッド詳細画面を閲覧している。
* スレッド詳細画面にはスクラッチ入力フォームとスクラッチ一覧が表示されている。

**2. 基本的な流れ（正常系）:**

1.  **ユーザーは自身のスレッド詳細画面を開く。**
2.  **ユーザーはスクラッチ入力フォーム（例: テキストエリア）にスクラッチ内容を入力する。**
    * スクラッチはMarkdown形式で記述できることを想定します。
3.  **ユーザーは「スクラッチを追加」ボタン（または「投稿」ボタンなど）をクリックする。**
4.  **システムは入力されたスクラッチの内容を検証する。**
    * スクラッチが空でないか、特定の文字数制限などをチェックする。
5.  **検証が成功した場合、システムはスクラッチをデータベースに保存する。**
    * スクラッチ内容、投稿日時、関連するスレッドIDなどの情報が保存される。
6.  **システムはスクラッチ一覧を更新し、新しく追加されたスクラッチを表示する。**
    * 画面がリロードされるか、Ajaxなどで動的に更新される。
    * スクラッチ入力フォームはクリアされる。
7.  **システムはスクラッチ追加成功を通知するメッセージ（任意。例: 「スクラッチが追加されました」）を表示する。**

---

**3. 代替の流れ（例外系、エラーなど）:**

* **A. スクラッチが未入力の場合:**
    1.  ユーザーが「スクラッチを追加」ボタンをクリックする。
    2.  システムはスクラッチ入力欄が空であることを検知する。
    3.  システムはスクラッチ入力欄の近くにエラーメッセージ（例: 「スクラッチは必須です」）を表示し、処理を中断する。
* **B. スクラッチが長すぎる場合:**
    1.  ユーザーが「スクラッチを追加」ボタンをクリックする。
    2.  システムは入力されたスクラッチが規定の文字数を超えていることを検知する。
    3.  システムはスクラッチ入力欄の近くにエラーメッセージ（例: 「スクラッチは〇〇文字以内で入力してください」）を表示し、処理を中断する。
* **C. システムエラーが発生した場合:**
    1.  ユーザーが「スクラッチを追加」ボタンをクリックする。
    2.  データベース保存中に予期せぬエラーが発生する。
    3.  システムは一般的なエラーメッセージ（例: 「スクラッチの追加中にエラーが発生しました。時間をおいて再度お試しください。」）を表示する。

---

**4. 事後条件:**

* スクラッチが正常に追加された場合: データベースに新しいスクラッチレコードが作成され、ユーザーはスレッド詳細画面で追加したスクラッチを確認できる。
* スクラッチが追加されなかった場合: ユーザーはスレッド詳細画面に留まり、エラーメッセージが表示される。

